# 架構

只想出大問題的片段是不夠的，還需要知道一點這些片段如何組織在一起，  
以及那些可能比較重要;這樣的話，你會知道應該先做什麼

```
架構。架構是系統的組織結構，包含分解開來的各個零件、連接性、互動機制  
以及你在系統設計中使用的指導原則與決策
```

## 撰寫偉大軟體三步驟

1. 確認你的軟體做客戶要它做的事
2. 應用基本OO原則，增加軟體的彈性
3. 努力達成可維護、可重利用的設計

## 從功能性開始

第一個步驟總是確認應用程式做它該做的事。在小專案裡，我們使用需求清單  
寫下功能性;在大專案裡，我們使用功能清單整理出那些事

### 功能清單

1. 此框架支援不同類型的地形
2. 此框架支援不同時代，包含虛構的時代，像是科幻的或幻想的
3. 此框架根據遊戲不同，支援多種類型的部隊戰鬥單位
4. 此框架為額外的戰役或戰鬥情節，支援外掛模組
5. 此框架提供版塊組成的圖版，每一個版塊都具有地形類型
6. 此框架追蹤輪到誰動作
7. 此框架協調基礎的移動

你認為什麼是最重要的功能？？

應用程式裡真正重要的事情是架構上重要的  
你應該先把焦點置於其上

### 架構三問

當你試圖想出某件事是否對架構很重要時，可以問問這三個問題：

1. 它是系統本質的一部分嗎  
  該功能真的是系統實質意義的核心？？
2. 這是什麼意思？？  
  假如你不確定某項功能的敘述究竟是什麼意思，把注意力放在該功能上是很重要的  
3. [到底]如何做
  另一個在早期就把注意力集中的地方，是似乎很難實作的地方，或者對你來說是全新的編程任務
  
系統本質 是指在最基本的層次上系統是什麼。

當你不了解什麼意思的時候你能運用基本三步驟：
1. 詢問客戶
2. 共通性分析
3. 實作計畫

### 關鍵功能

1. 遊戲圖版 - 系統本質
2. 遊戲特定的戰鬥單位 - 系統的本質，以及這是什麼意思？
3. 協調移動 - 這是什麼意思，以及我們如何做？

### 哪個功能先開始？？

減少風險  
不必爭論應該從哪先開始。只要把焦點放在減少風險  
一次把焦點放在一個功能上，減少專案的風險  
不要為無助於減少風險的功能分心

### 使用情節
版圖的使用情節
```
遊戲設計者以高度與寬度建立圖版  
玩家2移動坦克到(4,5)  
玩家2將兵力移到(4,5)  
玩家2移動坦克到(4,5)  
玩家1移動砲兵部隊到(4,5)  
遊戲請求(4,5)的戰鬥單位  
玩家1與玩家2進行戰鬥  
遊戲請求(4,5)的戰鬥地形  
玩家2的戰鬥單位戰勝  
玩家1的戰鬥單位從(4,5)被移除  
玩家1將兵力移到(2,2)  
遊戲請求(2,2)的地形  
```

### 接下來該做那個功能？？

盡可能在既有基礎上建立
當你除了需求與圖型之外別無他物時，你必須挑一個地方開始  
但是，既然我們確實已經有了一些程式碼與類別，挑選另一個  
與我們已經建立之物相關的關鍵功能是最容易的。記住，我們  
對架構所下的定義是什麼？  

假如你沒有具有關係的兩個零件，你真的不能談論零件之間的
關係。我們知道Board與Unit是相關的，而[遊戲特定的戰鬥單位]  
是關鍵功能，因此，很明顯地，那是下一步要進行的事。

### 再訪共通性

在這些不同類型的戰鬥單位中，有什麼是共通的？有什麼基本的事情將適用於任何遊戲的戰鬥單位？  
共通性不只是特性的名稱，你必須深入一點看  
表面上，不同遊戲所使用的戰鬥單位似乎沒什麼共通之事  
但是，讓我們從每個戰鬥單位的特性實際名稱對一步
對每個戰鬥單位來說，什麼是真正相同的事？？




  
